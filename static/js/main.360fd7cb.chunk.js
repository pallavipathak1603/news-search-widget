(this["webpackJsonpnews-search-widget"]=this["webpackJsonpnews-search-widget"]||[]).push([[0],{21:function(e,t,a){e.exports=a(56)},26:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(18),s=a.n(l),c=(a(26),a(9),a(20)),i=a(2),o=a(3),u=a(7),m=a(5),p=a(4),h=a(6),d=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).handleClickCard=function(){window.open(a.props.url,"_blank")},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"card",onClick:this.handleClickCard},n.a.createElement("img",{className:"image",src:this.props.urlToImage,alt:"react logo"}),n.a.createElement("div",{className:"card-body"},n.a.createElement("ul",{className:"card-list"},n.a.createElement("li",null,n.a.createElement("span",{className:"card-item-key"},"Author: "),n.a.createElement("span",null,this.props.author)),n.a.createElement("li",null,n.a.createElement("span",{className:"card-item-key"},"Title: "),n.a.createElement("span",null,this.props.title)),n.a.createElement("li",null,n.a.createElement("span",{className:"card-item-key"},"Description: "),n.a.createElement("span",null,this.props.description)))))}}]),t}(r.Component),g=a(19),v=a.n(g),f="363d26dd3d664d199ca63adc371e22aa",y="https://newsapi.org/v2/everything",E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){a.props.query&&a.handleUrlQueryParam();var e=Object(p.a)(a),t=document.getElementById("articles");t.addEventListener("scroll",(function(){if(e.state.articles.length<e.state.totalResults&&t.scrollTop+t.clientHeight>=t.scrollHeight){var a=e.state.page+1;e.setState({page:a}),e.refreshResult(!0)}}))},a.setTimer=function(){var e=a.state.timer-1;a.setState({timer:e})},a.refreshResult=function(e){var t=a.state.queryParam;t.length>=3?v.a.get("".concat(y,"?q=").concat(t,"&apiKey=").concat(f,"&pageSize=",10,"&page=").concat(a.state.page)).then((function(t){var r=t.data;if(console.log(r),e){var n=a.state.articles;n.push.apply(n,Object(c.a)(r.articles)),a.setState({articles:n,timer:30})}else a.setState({page:1,totalResults:r.totalResults,articles:r.articles,timer:30});clearInterval(a.intervalID),clearInterval(a.timerID),a.intervalID=setInterval(a.refreshResult,3e4),a.timerID=setInterval(a.setTimer,1e3)})):(a.setState({page:1,totalResults:null,articles:[]}),clearInterval(a.timerID),clearInterval(a.intervalID))},a.handleOnChange=function(e){var t=e.target.value;a.setState({page:1,queryParam:t},(function(){a.refreshResult(!1)}))},a.handleUrlQueryParam=function(){a.props.query.length>=3&&a.setState({page:1,queryParam:a.props.query},(function(){a.refreshResult(!1)}))},a.state={totalResults:null,page:1,fetchedArticles:0,articles:[],queryParam:"",timer:30},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.articles;return n.a.createElement("div",{id:"search-page"},n.a.createElement("div",{className:"searchbar"}," ",this.state.articles.length>0&&n.a.createElement("span",{id:"timer"},"Auto refreshing in: ",this.state.timer),n.a.createElement("input",{className:"search-input",type:"text",placeholder:"Type something to search ..",onChange:this.handleOnChange})),n.a.createElement("div",{id:"articles"},e.length>0&&e.map((function(e,t){return n.a.createElement(d,{key:t,author:e.author,title:e.title,description:e.description,urlToImage:e.urlToImage,url:e.url})}))))}}]),t}(r.Component),w=a(44);var b=function(){var e=null,t=w.parseUrl(window.location.href);return console.log(t),t.query&&void 0!==t.query.query&&(e=t.query.query),n.a.createElement("div",{className:"App"},n.a.createElement(E,{query:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){}},[[21,1,2]]]);
//# sourceMappingURL=main.360fd7cb.chunk.js.map